{% load static %}

<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>NerDeck - Study {{ deck.title }}</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		>
		<link rel="stylesheet" href="{% static 'css/style.css' %}">
	</head>
		<body class="d-flex flex-column min-vh-100 bg-light" data-deck-id="{{ deck.id }}" data-edit-base-url="{% url 'new_flashcard' deck.id %}">
			<header class="border-bottom bg-white">
				<div class="container d-flex align-items-center justify-content-between py-2">
					<a href="{% url 'home' %}" class="d-flex align-items-center text-decoration-none">
						<img
							src="{% static 'images/logo_verde.png' %}"
							alt="NerDecks logo"
							style="height: 50px; width: auto;"
						>
					</a>
					<div class="d-flex gap-2">
						<a href="{% url 'decks' %}" class="btn btn-primary scramble-text">NerDecks</a>
						<a href="{% url 'logout' %}" class="btn btn-outline-secondary">Log out</a>
					</div>
				</div>
			</header>

			<main class="flex-grow-1 py-5 study-main">
				<div class="container">
					<div class="row justify-content-center">
						<div class="col-12 col-md-9 col-lg-7">
							<section class="study-shell">
								<header class="study-header text-center">
									<p class="study-kicker mb-2">Review Session</p>
									<h1 class="study-title mb-2">STUDY</h1>
									<p class="study-deck mb-0">
										Deck: <span class="study-deck-name">{{ deck.title }}</span>
									</p>
								</header>

								{% if current_card %}
									<div class="row justify-content-center mb-4 mt-4">
										<div class="col-12 col-lg-10">
											<div class="card shadow-sm study-card">
												<div class="card-body d-flex align-items-center justify-content-center">
													<p
														id="card-text"
														class="fs-5 mb-0 text-center"
														data-front="{{ current_card.front_text|escapejs }}"
														data-back="{{ current_card.back_text|escapejs }}"
														data-card-id="{{ current_card.id }}"
														data-step="{{ current_card_state.step }}"
														data-due-at="{{ current_card_state.due_at }}"
													>
														{{ current_card.front_text }}
													</p>
												</div>
											</div>
										</div>
									</div>

									<div class="row justify-content-center mt-2">
										<div class="col-12 col-lg-10 d-flex align-items-center">
											<div class="flex-grow-1 d-flex justify-content-start">
												<button id="edit-button" type="button" class="btn btn-outline-secondary btn-sm d-none">
													Edit
												</button>
											</div>
											<div class="flex-grow-1 d-flex justify-content-center gap-2">
												<button id="show-button" type="button" class="btn btn-primary">
													Show
												</button>
												<button id="right-button" type="button" class="btn btn-success d-none">
													Right
												</button>
												<button id="wrong-button" type="button" class="btn btn-danger d-none">
													Wrong
												</button>
											</div>
											<div class="flex-grow-1 d-flex justify-content-end">
												<button id="delete-button" type="button" class="btn btn-outline-danger btn-sm d-none">
													Delete
												</button>
											</div>
										</div>
									</div>

									<div class="row justify-content-center mt-3">
										<div class="col-12 col-lg-10">
											<p id="review-message" class="text-center text-muted small mb-0"></p>
										</div>
									</div>
								{% else %}
									<p class="text-muted text-center mt-4 mb-0">There are no cards due right now in this NerDeck.</p>
								{% endif %}
							</section>
						</div>
					</div>
				</div>
			</main>

			<div class="modal fade" id="deleteCardModal" tabindex="-1" aria-labelledby="deleteCardModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="deleteCardModalLabel">Delete Flashcard</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">
							Are you sure you want to delete this flashcard?
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
							<button type="button" class="btn btn-danger" id="confirmDeleteButton">Delete</button>
						</div>
					</div>
				</div>
			</div>

		<footer class="py-4 bg-white border-top mt-auto">
			<div class="container text-center text-muted small">
				&copy; NerDeck
			</div>
		</footer>

			<script
				src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
				integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
				crossorigin="anonymous"
			></script>
			<!-- Scramble effect-->
			<script src="{% static 'js/scramble_effect.js' %}"></script>

			{% if current_card %}
			<script type="module" src="{% static 'js/study_module.js' %}"></script>
			{% endif %}
	</body>
</html>
