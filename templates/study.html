{% load static %}

<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>NerDeck - Study {{ deck.title }}</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		>
		<link rel="stylesheet" href="{% static 'css/style.css' %}">
	</head>
	<body class="d-flex flex-column min-vh-100 bg-light" data-deck-id="{{ deck.id }}">
		<header class="border-bottom bg-white">
			<div class="container d-flex align-items-center justify-content-between py-2">
				<a href="{% url 'home' %}" class="d-flex align-items-center text-decoration-none">
					<img
						src="{% static 'images/logo_nerdeck.png' %}"
						alt="NerDeck logo"
						style="height: 32px; width: auto;"
					>
				</a>
				<div class="d-flex gap-2">
					<a href="{% url 'decks' %}" class="btn btn-outline-secondary">Back to NerDecks</a>
				</div>
			</div>
		</header>

		<main class="flex-grow-1 py-5">
			<div class="container">
				<h1 class="h3 mb-3 text-center">Study "{{ deck.title }}"</h1>

	

				{% if current_card %}
					<div class="row justify-content-center mb-4">
						<div class="col-12 col-md-8 col-lg-6">
							<div class="card shadow-sm">
								<div class="card-body d-flex align-items-center justify-content-center" style="min-height: 180px;">
									<p
										id="card-text"
										class="fs-5 mb-0"
										data-front="{{ current_card.front_text|escapejs }}"
										data-back="{{ current_card.back_text|escapejs }}"
										data-card-id="{{ current_card.id }}"
										data-step="{{ current_card_state.step }}"
										data-due-at="{{ current_card_state.due_at }}"
									>
										{{ current_card.front_text }}
									</p>
								</div>
							</div>
						</div>
					</div>

					<div class="row justify-content-center">
						<div class="col-auto d-flex gap-2">
							<button id="show-button" type="button" class="btn btn-primary">
								Show
							</button>
							<button id="right-button" type="button" class="btn btn-success d-none">
								Right
							</button>
							<button id="wrong-button" type="button" class="btn btn-danger d-none">
								Wrong
							</button>
						</div>
					</div>

					<div class="row justify-content-center mt-3">
						<div class="col-12 col-md-8 col-lg-6">
							<p id="review-message" class="text-center text-muted small mb-0"></p>
						</div>
					</div>
				{% else %}
					<p class="text-muted text-center">There are no cards due right now in this NerDeck.</p>
				{% endif %}
			</div>
		</main>

		<footer class="py-4 bg-white border-top mt-auto">
			<div class="container text-center text-muted small">
				&copy; NerDeck
			</div>
		</footer>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"
		></script>

		{% if current_card %}
		<script type="module" src="{% static 'js/study_module.js' %}"></script>
		{% endif %}
	</body>
</html>
