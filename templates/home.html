{% load static %}

<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Nerdecks - Home</title>

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Space+Grotesk:wght@300..700&display=swap"
            rel="stylesheet"
        >

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
        >

        <!-- Favicons -->
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicons/apple-touch-icon.png' %}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicons/favicon-32x32.png' %}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicons/favicon-16x16.png' %}">
        <link rel="shortcut icon" href="{% static 'images/favicons/favicon.ico' %}" type="image/x-icon">
        <link rel="manifest" href="{% static 'images/favicons/site.webmanifest' %}">

        <!-- Styles CSS -->
        <link rel="stylesheet" href="{% static 'css/style.css' %}">

        <!-- GSAP + transition logic -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
        <script src="{% static 'js/transition.js' %}"></script>
    </head>
    <body class="home-page d-flex flex-column min-vh-100">
        <!-- Global transition overlay used on page navigation -->
        {% include 'transition_overlay.html' %}

        <!-- Site header / navbar -->
        <header class="border-bottom bg-white">
            <div class="container d-flex align-items-center justify-content-between py-2">
                <a href="/" class="d-flex align-items-center text-decoration-none">
                    <img
                        src="{% static 'images/newlogonerdecks.png' %}"
                        alt="Nerdecks logo"
                        style="height: 50px; width: auto;"
                    >
                </a>
                <div class="home-nav-actions d-flex gap-2">
                    {% if user.is_authenticated %}
                        <a href="{% url 'decks' %}" class="btn btn-primary scramble-text">Decks</a>
                        <a href="{% url 'logout' %}" class="btn btn-outline-secondary">Log out</a>
                    {% else %}
                        <a href="{% url 'signup' %}" class="btn btn-primary scramble-text">SIGN UP</a>
                        <a href="{% url 'login' %}" class="btn btn-outline-secondary">Log in</a>
                    {% endif %}
                </div>
            </div>
        </header>

        <!-- Hero section: logo/title area with optional video -->
        <hero class="py-4 home-hero">
            <div class="container">
                <div class="card shadow-sm">
                    <div class="card-body text-center py-5">
                        <div class="row align-items-center">
                            <div class="col-md-8 col-lg-6 mx-auto">
                                <div class="ratio ratio-16x9 mb-2 position-relative hero-ratio">
                                    <div id="heroTextTrigger" class="hero-text-trigger hero-text-overlay">
                                        <h1 class="hero-title mb-2">
                                            <span class="glitch-btn">
                                                NERDECKS
                                                <span class="slice"></span>
                                                <span class="slice"></span>
                                                <span class="slice"></span>
                                            </span>
                                        </h1>
                                    </div>

                                    <video
                                        id="heroVideo"
                                        class="w-100 h-100 d-none"
                                        poster="{% static 'images/tv.png' %}"
                                    >
                                        <source src="{% static 'videos/video_tv_cc.mp4' %}" type="video/mp4">
                                        Your browser does not support the video tag.
                                    </video>
                                    <button
                                        id="overlayPlayHeroVideo"
                                        class="btn btn-play-overlay d-none"
                                        type="button"
                                    >
                                        &#9658;
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </hero>

        <!-- Main page content -->
        <main id="main-home-content" class="flex-grow-1">
            <!-- Django flash messages (alerts) -->
            {% if messages %}
                <div class="container mt-3">
                    {% for message in messages %}
                        <div
                            class="alert alert-{{ message.tags }} alert-dismissible fade show"
                            role="alert"
                        >
                            {{ message }}
                            <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="alert"
                                aria-label="Close"
                            ></button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}

            <!-- "How does it work" steps section -->
            <section class="py-5">
                <div class="container fade-down">
                    <h1 class="text-center mb-4 display-1 how-it-works-titl home-how-title">
                        HOW DOES IT WORK?
                    </h1>

                    <div class="row g-4">
                        <!-- STEP 1 -->
                        <div class="col-12 fade-left">
                            <div class="card shadow-sm">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <h2 class="h5 mb-2 text-center">STEP 1 - CREATE A DECK!</h2>
                                            <p class="mb-0 text-muted text-center">
                                                Create a deck for any topic you're learning. Keep things broad or get specific—it's your
                                                space.
                                            </p>
                                        </div>

                                        <div class="col-md-4 text-center">
                                            <img
                                                src="{% static 'images/step1.png' %}"
                                                alt="Step 1 - Create decks"
                                                class="img-fluid w-75 mt-2"
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- STEP 2 -->
                        <div class="col-12 fade-right">
                            <div class="card shadow-sm">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-4 text-center">
                                            <img
                                                src="{% static 'images/step2.png' %}"
                                                alt="Step 2 - Add flashcards"
                                                class="img-fluid w-75 mt-2"
                                            >
                                        </div>

                                        <div class="col-md-8">
                                            <h2 class="h5 mb-2 text-center">STEP 2 - ADD FLASHCARDS!</h2>
                                            <p class="mb-0 text-muted text-center">
                                                Each flashcard has a question on one side and an answer on the other. Add one idea per
                                                card to make learning easier.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- STEP 3 -->
                        <div class="col-12 fade-left">
                            <div class="card shadow-sm">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <h2 class="h5 mb-2 text-center">STEP 3 - REVIEW & REPEAT!</h2>
                                            <p class="mb-0 text-muted text-center">
                                                Review in short, focused sessions. Mark each card as Got it right or Got it wrong—NerDeck's
                                                spaced repetition system takes care of the rest.
                                            </p>
                                        </div>

                                        <div class="col-md-4 text-center">
                                            <img
                                                src="{% static 'images/step3.png' %}"
                                                alt="Step 3 - Review & repeat"
                                                class="img-fluid w-75 mt-2"
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- History + Signup CTA -->
            <section class="py-5">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow-sm">
                                <div class="card-body">
                                    <div class="row align-items-center g-5">
                                        <!-- LEFT: Image -->
                                        <div class="col-md-4 text-center">
                                            <img
                                                src="{% static 'images/hermann_ebbinghaus.png' %}"
                                                alt="Hermann Ebbinghaus and the Forgetting Curve"
                                                class="img-fluid w-75 mt-2 rounded"
                                            >
                                        </div>

                                        <!-- RIGHT: Text -->
                                        <div class="col-md-8 text-md-start text-center">
                                            <h2 class="mb-4 text-center">A LITTLE BIT OF HISTORY</h2>

                                            <p class="text-muted text-center">
                                                In the late 1800s, German psychologist <strong>Hermann Ebbinghaus</strong>
                                                experimented on himself to understand how memory works.
                                            </p>

                                            <p class="text-muted text-center">
                                                He discovered the <strong>Forgetting Curve</strong>: we forget information
                                                quickly at first, then more slowly over time.
                                            </p>

                                            <p class="text-muted text-center">
                                                Reviewing material just before you forget it dramatically strengthens memory.
                                                That insight became the foundation of spaced repetition.
                                            </p>

                                            <a href="{% url 'signup' %}" class="btn btn-primary btn-lg mt-3 text-center d-block scramble-text">
                                                Create your account
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Site footer -->
        <footer class="py-4 bg-white border-top mt-auto">
            <div class="container text-center text-muted small">
                &copy; NerDecks
            </div>
        </footer>

        <!-- Vendor and page-specific scripts -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
        ></script>
        <script src="{% static 'js/fade_effects.js' %}"></script>
        <script src="{% static 'js/scramble_effect.js' %}"></script>
        <script src="{% static 'js/glitch_effect.js' %}"></script>
        <script src="{% static 'js/home.js' %}"></script>
    </body>
</html>
